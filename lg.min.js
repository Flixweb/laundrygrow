// --- Navbar change on scroll ---
(function () {
    const navbar = document.getElementById('mainNavbar');
    const threshold = 20;
    window.addEventListener('scroll', function () {
        if (window.scrollY > threshold) {
            navbar.classList.add('navbar-scrolled');
        } else {
            navbar.classList.remove('navbar-scrolled');
        }
    });
})();


// Function to create more dynamic elements
function createAnimatedElements() {
    const heroBackground = document.querySelector('.hero-background');

    // Create more bubbles
    for (let i = 0; i < 5; i++) {
        const size = Math.random() * 60 + 40;
        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        bubble.style.width = `${size}px`;
        bubble.style.height = `${size}px`;
        bubble.style.left = `${Math.random() * 100}%`;
        bubble.style.top = `${Math.random() * 100}%`;
        bubble.style.animationDelay = `${Math.random() * 5}s`;
        heroBackground.appendChild(bubble);
    }

    // Create more laundry icons
    const icons = ['tshirt', 'socks', 'mitten', 'vest', 'hat-cowboy', 'bucket'];
    for (let i = 0; i < 8; i++) {
        const icon = document.createElement('i');
        icon.className = `laundry-icon fas fa-${icons[Math.floor(Math.random() * icons.length)]}`;
        icon.style.fontSize = `${Math.random() * 15 + 15}px`;
        icon.style.left = `${Math.random() * 100}%`;
        icon.style.top = `${Math.random() * 100}%`;
        icon.style.animationDelay = `${Math.random() * 10}s`;
        icon.style.animationDuration = `${Math.random() * 10 + 15}s`;
        heroBackground.appendChild(icon);
    }

    // Create more soap bubbles
    for (let i = 0; i < 50; i++) {
        const size = Math.random() * 20 + 10;
        const bubble = document.createElement('div');
        bubble.className = 'soap-bubble';
        bubble.style.width = `${size}px`;
        bubble.style.height = `${size}px`;
        bubble.style.left = `${Math.random() * 100}%`;
        bubble.style.bottom = `-${size}px`;
        bubble.style.animationDelay = `${Math.random() * 8}s`;
        bubble.style.animationDuration = `${Math.random() * 5 + 10}s`;
        heroBackground.appendChild(bubble);
    }
}

// Initialize animations when page loads
document.addEventListener('DOMContentLoaded', function () {
    createAnimatedElements();
});
// --- Smooth scroll fix for fixed navbar (for anchor links that start with #) ---
(function () {
    const NAVBAR_HEIGHT = document.getElementById('mainNavbar').offsetHeight || 72;
    document.querySelectorAll('a[href^="#"]').forEach(function (anchor) {
        anchor.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (!href || href === '#' || href === '#!') return;
            const targetEl = document.querySelector(href);
            if (targetEl) {
                e.preventDefault();
                const rect = targetEl.getBoundingClientRect();
                const absoluteTop = rect.top + window.pageYOffset;
                const offset = NAVBAR_HEIGHT + 14;
                window.scrollTo({
                    top: absoluteTop - offset,
                    behavior: 'smooth'
                });
                const bsCollapseEl = document.getElementById('navCollapse');
                if (bsCollapseEl && bsCollapseEl.classList.contains('show')) {
                    const collapseInstance = bootstrap.Collapse.getInstance(bsCollapseEl);
                    if (collapseInstance) collapseInstance.hide();
                }
            }
        });
    });
})();

// --- Pricing modal logic ---
(function () {
    const planButtons = document.querySelectorAll('.choose-plan');
    const modalEl = document.getElementById('planModal');
    const modalTitle = document.getElementById('planModalLabel');
    const modalBody = document.getElementById('planModalBody');
    const bsModal = new bootstrap.Modal(modalEl);

    planButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const plan = btn.getAttribute('data-plan') || 'Plan';
            modalTitle.textContent = `Sign Up for ${plan}`;
            modalBody.innerHTML = `
        <p>Thank you for choosing the <strong>${plan}</strong> plan!</p>
        <p class="mb-0">Enter your details on the signup page to start your free trial. A friendly onboarding specialist will reach out to help you get set up.</p>
      `;
            bsModal.show();
        });
    });
})();

// --- Contact form simulation (no backend) ---
(function () {
    const form = document.getElementById('contactForm');
    const alertEl = document.getElementById('contactAlert');
    form.addEventListener('submit', function (e) {
        e.preventDefault();
        form.querySelector('button[type="submit"]').disabled = true;
        setTimeout(() => {
            form.reset();
            alertEl.classList.remove('d-none');
            form.querySelector('button[type="submit"]').disabled = false;
            setTimeout(() => {
                alertEl.classList.add('d-none');
            }, 4500);
        }, 700);
    });
})();

// --- Toggle between blog pages ---
(function () {
    const showPage1 = document.getElementById('showPage1');
    const showPage2 = document.getElementById('showPage2');
    const page1 = document.getElementById('page1');
    const page2 = document.getElementById('page2');

    if (showPage1 && showPage2 && page1 && page2) {
        showPage1.addEventListener('click', function () {
            page1.style.display = 'block';
            page2.style.display = 'none';
            this.classList.add('active');
            showPage2.classList.remove('active');
        });

        showPage2.addEventListener('click', function () {
            page1.style.display = 'none';
            page2.style.display = 'block';
            this.classList.add('active');
            showPage1.classList.remove('active');
        });
    }
})();

// --- Year in footer ---
document.getElementById('year').textContent = new Date().getFullYear();

// --- Accessibility: add aria-current to nav links based on scroll position ---
(function () {
    const sections = Array.from(document.querySelectorAll('section, header')).filter(s => s.id);

    function onScroll() {
        const scrollPos = window.scrollY + (document.getElementById('mainNavbar').offsetHeight || 72) + 24;
        let current = sections[0] ? sections[0].id : null;
        for (const sec of sections) {
            if (sec.offsetTop <= scrollPos) current = sec.id;
        }
        document.querySelectorAll('.navbar .nav-link').forEach(link => {
            const href = link.getAttribute('href') || '';
            if (href === '#' + current) {
                link.classList.add('active');
                link.setAttribute('aria-current', 'page');
            } else {
                link.classList.remove('active');
                link.removeAttribute('aria-current');
            }
        });
    }
    window.addEventListener('scroll', onScroll);
    window.addEventListener('load', onScroll);
})();

// --- Fade-in animation on scroll ---
(function () {
    const fadeElements = document.querySelectorAll('.fade-in');

    function checkFade() {
        fadeElements.forEach(element => {
            const elementTop = element.getBoundingClientRect().top;
            const elementVisible = 150;
            if (elementTop < window.innerHeight - elementVisible) {
                element.classList.add('visible');
            }
        });
    }

    window.addEventListener('scroll', checkFade);
    window.addEventListener('load', checkFade);
    checkFade();
})();

// --- Additional CSS for inline styles ---
(function () {
    const style = document.createElement('style');
    style.textContent = `
    .bg-light-purple { background-color: var(--light-purple); }
    .text-purple { color: var(--primary-purple); }
    .bg-light-primary { background-color: rgba(138, 79, 255, 0.05); }
    .feature-icon-sm {
      width: 48px;
      height: 48px;
      flex-shrink: 0;
    }
    .border-primary { border-color: var(--primary-purple) !important; }
  `;
    document.head.appendChild(style);


})();



// --- FAQ toggle functionality ---
document.querySelectorAll('.faq-question').forEach(question => {
    question.addEventListener('click', () => {
        const faqItem = question.parentElement;
        faqItem.classList.toggle('faq-active');
    });
});
// --- Pricing toggle functionality ---
const pricingToggle = document.getElementById('pricing-toggle');
const monthlyLabel = document.getElementById('monthly-label');
const yearlyLabel = document.getElementById('yearly-label');
const monthlyPrices = document.querySelectorAll('.monthly-price');
const yearlyPrices = document.querySelectorAll('.yearly-price');

pricingToggle.addEventListener('change', function () {
    if (this.checked) {
        monthlyLabel.classList.remove('active');
        yearlyLabel.classList.add('active');
        monthlyPrices.forEach(el => el.classList.add('d-none'));
        yearlyPrices.forEach(el => el.classList.remove('d-none'));
    } else {
        monthlyLabel.classList.add('active');
        yearlyLabel.classList.remove('active');
        monthlyPrices.forEach(el => el.classList.remove('d-none'));
        yearlyPrices.forEach(el => el.classList.add('d-none'));
    }
});

// --- FAQ toggle functionality ---
document.querySelectorAll('.faq-question').forEach(question => {
    question.addEventListener('click', () => {
        const faqItem = question.parentElement;
        faqItem.classList.toggle('faq-active');
    });
});
